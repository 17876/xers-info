<!DOCTYPE html>
<html lang=<%= siteConfig.language %>>
<% let title = `${siteConfig.website_title} â€“ Home`%>
<%- include('./partials/head.ejs', { title: siteConfig.website_title}) %>
<body class="m-0">
  <div class="front-wrapper">
      <div class="front-content">
        <div class="front-nav-scroll-hint">
          <div class="scroll-hint-wrapper">
            <div class="scroll-hint">Swipe left or right to explore the image</div>
          </div>
          <div class="front-nav">
            <div class="front-nav-image-link">
              <%- include('./partials/overlay-nav.ejs', {language: siteConfig.language, overlay_nav: indexPage.overlay_nav}) %>
            </div>
          </div>
        </div>
      </div>
  </div>

  <%- include('./partials/footer.ejs', { language: siteConfig.language, siteConfig: siteConfig }) %>
  </div>
  
  <script>
    //resizes the front-page-block-scroll-hint container, so the scroll hint disapperas with the image exactly synchtoniously
    function resizeFPBSHContainer() {
      const img = document.querySelector(".front-page-block-image-link img");
      const container = document.querySelector(".front-page-block-scroll-hint");
      const scrollHint = document.querySelector(".scroll-hint");
      const imageHeight = img.height;
      const scrollHintHeight = scrollHint.scrollHeight;
      const reducedHeight = imageHeight - scrollHintHeight;
      container.style.height = reducedHeight + "px";
    }

    if (window.matchMedia("(max-width: 768px)").matches) {
      window.addEventListener("load", () => {
        resizeFPBSHContainer();
        window.addEventListener("resize", resizeFPBSHContainer);
      });
    }



  </script>

  <script>
// sliding footer
  const footer = document.getElementById("footer-front");
  document.getElementById("footer-nav-path").onclick = () => {
    footer.classList.add("active");
  };

  document.getElementById("footer-close-icon").onclick = () => {
    footer.classList.remove("active");
  };

  window.addEventListener('load', () => {
    const scrollWrapper = document.querySelector('.front-nav-image-link');
    const image = document.querySelector('.front-nav-image-link img');
    const hint = document.querySelector('.scroll-hint');
    // Wait a short time to ensure image is loaded and dimensions are available
    if (image.complete) {
      centerImage();
    } else {
      image.onload = centerImage;
    }

    function centerImage() {
      const scrollAmount = (image.scrollWidth - scrollWrapper.clientWidth) / 2;
      scrollWrapper.scrollLeft = scrollAmount;
    }

    let scrollTimeout;

    scrollWrapper.addEventListener('scroll', () => {
      // Hide hint immediately on scroll
      hint.classList.add('hidden');

      // Clear any previous timeout
      clearTimeout(scrollTimeout);

      // Show it again after 1000ms of no scroll
      scrollTimeout = setTimeout(() => {
        hint.classList.remove('hidden');
      }, 200);
    });
  });

</script>
</body>
</html>