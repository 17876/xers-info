<!DOCTYPE html>
<html lang=<%= siteConfig.language %>>

<% let title = `${siteConfig.website_title_short} â€“ ${pageConfig.title}`;%>
<%- include('./partials/head.ejs', {title: title}) %>

<body>
  <div class="events-wrapper">
    <div class="events-content">
      
      <div class="events-header">
        <div class="events-title">
          <%- pageConfig.title %>
        </div>
        <div id="footer-nav-path" class="events-hamburger">
          <img src="/events/img/hamburger_icon.png" alt="">
        </div>
      </div>
      
      <div class="events-flex-parent">
        <div class="events">
          <% for (var i = 0; i<events.length; i++) { 
            let curEvent = events[i];
            let curEventClass = "";
            
            if (curEvent.past==1) {
              curEventClass = "event past"
            }
            else {
              curEventClass = "event"
            }%>

          <div class="<%= curEventClass %>">
          
          <!-- datetime -->

            <% if (curEvent.datetime) {%>
            <p class="datetime">

              <% if (curEvent.datetime.date) {%>
              <span class="date">
                <%- curEvent.datetime.date %>
              </span>
              <% } %>

              <% if (curEvent.datetime.time) {%>
              <span class="time">
                <%- curEvent.datetime.time %>
              </span>
              <% } %>
            </p>
            <% } %>
            
            <!-- venue -->
            
            <% if (curEvent.venue) {%>
            <p class="venue">
              <%- curEvent.venue %>
            </p>
            <% } %>

            <!-- title -->

            <p class="title">
              <%- localizeLinks(curEvent.title, siteConfig.language)%>
            </p>
            
            <% if (curEvent.subtitle) {%>
            <p class="subtitle">
              <%- curEvent.subtitle %>
            </p>
            <% } %>

            <% if (curEvent.collab) {%>
            <p class="collab">
              <% if (curEvent.collab.label) {%>
              <span><%-curEvent.collab.label%></span>
              <% } 

              for (var j = 0; j<curEvent.collab.value.length; j++) {
                
                let aclass = '';
                if (j!=curEvent.collab.value.length-1) {
                  aclass = 'with-comma';
                  }

                if (curEvent.collab.value[j]) { %>
              <span class=<%=aclass%>><%-curEvent.collab.value[j]%></span>
              <% }
                  else { %>
              <span class=<%=aclass%>><%-curEvent.collab.value[j]%></span>
              <% }
              } %>
            </p>
            <% } %>

            <% if (curEvent.description) {%>
            <p class="description">
              <%- curEvent.description %>
            </p>
            <% } %>

            <% if (curEvent.extra) {
              for (var j = 0; j<curEvent.extra.length; j++) { %>
            <p class="extra">
              <%- curEvent.extra[j] %>
            </p>
            <% } 
          } %>

            <% if (curEvent.link) {%>
            <p class="link">
              <a href=<%= curEvent.link %>><%= curEvent.link %></a>
            </p>
            <% } %>

          </div>
          <% } %>

        </div>
      </div>
    <%- include('./partials/footer.ejs', { language: siteConfig.language, siteConfig: siteConfig }) %>
    </div>
  </div>
</body>
</html>

<script>
// sliding footer
  const footer = document.getElementById("footer-front");
  document.getElementById("footer-nav-path").onclick = () => {
    footer.classList.add("active");
  };

  document.getElementById("footer-close-icon").onclick = () => {
    footer.classList.remove("active");
  };
</script>